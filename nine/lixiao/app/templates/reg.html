<!DOCTYPE html>
<html>
<head>
<title>Reg || 注册</title>

<link rel="stylesheet" href="https://cdn.bootcss.com/sweetalert/1.1.3/sweetalert.css">
<script src="https://cdn.bootcss.com/sweetalert/1.1.3/sweetalert.min.js"></script>

<link href="/static/css/style1.css" rel='stylesheet' type='text/css' />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="App Loction Form,Login Forms,Sign up Forms,Registration Forms,News latter Forms,Elements"./>
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>

<script src="/static/js/jquery-2.1.1.js"></script>
<!--webfonts-->
<link href="/static/css/css" rel='stylesheet' type='text/css'>
<!--//webfonts-->
</head>
<body>
<div class="adcenter"></div>
    <h1>User Regist</h1>
        <div class="app-location">
            <h2>Welcome Regist</h2>
            <div class="line"><span></span></div>
	    <div class="location"><img src="/static/img/location.png" class="img-responsive" alt="" /></div>
	    <form id='regForm' method="post">
                <div class="form-group">
		    <input id="username" type="text" class="form-control" name="username" placeholder="用户名" required="">
                </div>
                <div class="form-group">
		    <input id="name" type="text" class="form-control" name="name" placeholder="姓名" required="">
                </div>
                <div class="form-group">
		    <input  id="password" type="password" class="form-control" name="password" placeholder="passwd" required="">
                </div>
                <div class="form-group">
                    <input id="phone" type='text' class="form-control" name='phone' placeholder="phone"，required="">
                </div>
                <div class="form-group">
                    <input id="email" type='text' class="form-control" name='mail' placeholder="email"，required="">
                </div>
                <div class="form-group">
                    <input id="role" type="hidden" name="role" value=1>
                    <input id="status" type="hidden" name="status" value=0>
                </div>
	        <button id='regbtn' type="submit" class="btn btn-primary block full-width m-b">提交</button>
	    </div>
	    </form>
	</div>

    <!--start-copyright-->
    <div class="copy-right">
        <p>Copyright &copy; 2017 Reboot homework </p>
    </div>
    <!--//end-copyright-->


<script>
$('#regbtn').on('click',function(){
     var str = $('#regForm').serialize()
     if (!$("#username").val()){
        swal({ 
                title: "警告", 
                text: "请输入用户名",   
                type: "error",   
                confirmButtonText: "确定"
                });
      return false
        }

     if (!$("#name").val()){
        swal({ 
                title: "警告", 
                text: "请输入姓名",   
                type: "error",   
                confirmButtonText: "确定"
                });
      return false
        }

     if (!$("#password").val()){
        swal({ 
                title: "警告", 
                text: "请输入密码",   
                type: "error",   
                confirmButtonText: "确定"
                });
      return false
        }    
 
     console.log(str) 
     $.post("/reg/",str,function(data){
           console.log(data)    
          data = JSON.parse(data)
          console.log(data)  
          if (data['code']==0){
            swal({ 
                title: "注册成功", 
                text: data['msg'],   
                type: "success",   
                confirmButtonText: "确定"
                },function(){               
                  location.href="/login/"
              });
          }else{ 
            //swal("MY GOD",data['msg'],"error");
               swal({ 
                title: "注册失败", 
                text: data['msg'],   
                type: "error",   
                confirmButtonText: "确定"
                },function(){               
                  location.href="/reg/"
              });
             }
     })
     return false
})
</script>

</body>
</html>
